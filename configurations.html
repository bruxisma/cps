<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Package Configurations &mdash; Common Package Specification 0.5 documentation</title>
    
    <link rel="stylesheet" href="_static/cps.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Common Package Specification 0.5 documentation" href="index.html" />
    <link rel="next" title="Package Searching" href="searching.html" />
    <link rel="prev" title="Component Specification" href="components.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="searching.html" title="Package Searching"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="components.html" title="Component Specification"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Common Package Specification 0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="package-configurations">
<h1>Package Configurations<a class="headerlink" href="#package-configurations" title="Permalink to this headline">¶</a></h1>
<p>Configurations provide a mechanism for a package to provide multiple configurations from a single distribution. Such configurations might include separate debug and release libraries, builds with and without thread safety, and so forth. The possible configurations are determined by each individual package, and it is left to the consumer and build system to decide when and how to select a non-default configuration.</p>
<p>When a consumer consumes a component, the build system must determine the attribute values for that component by selecting which configuration of the component to use (if the component has multiple configurations). It is recommended that build systems select a configuration as follows:</p>
<ul class="simple">
<li>For each package, the consumer shall have a mechanism for providing a list of preferred configurations. The first configuration in this list which matches an available configuration of the component shall be used. (If the build system supports multiple configurations, it is recommended that the consuming project may specify different values and/or order of this list depending on its own active configuration.)</li>
<li>If the build system supports multiple configurations, the build system may implement a mechanism to prefer a configuration which &#8220;matches&#8221; the consuming project&#8217;s active configuration.</li>
<li>The package&#8217;s <a class="reference internal" href="schema.html#configurations-package"><em>Configurations (Package)</em></a> shall be searched. The first configuration in this list which matches an available configuration of the component shall be used.</li>
</ul>
<p>The value of an attribute for a component is determined in one of two ways: If the selected <tt class="code object docutils literal"><span class="pre">configuration</span></tt> of the <tt class="code object docutils literal"><span class="pre">component</span></tt> has the attribute, that value is used. Otherwise, if the <tt class="code object docutils literal"><span class="pre">component</span></tt> directly has the requested attribute, that value is used. This allows a configuration-specific attribute to override an attribute value that is not configuration-specific. If the attribute is required, and is not present on either the selected <tt class="code object docutils literal"><span class="pre">configuration</span></tt>, or the non-configuration-specific attributes of the <tt class="code object docutils literal"><span class="pre">component</span></tt>, then the CPS is ill-formed. Note that a value of <tt class="code keyword docutils literal"><span class="pre">null</span></tt> satisfies the condition of having the attribute. A value of <tt class="code keyword docutils literal"><span class="pre">null</span></tt> has the usual meaning where <tt class="code keyword docutils literal"><span class="pre">null</span></tt> is an acceptable value for the attribute; otherwise, a value of <tt class="code keyword docutils literal"><span class="pre">null</span></tt> shall be treated as the attribute being unset (and shall suppress falling back to the non-configuration-specific value).</p>
<div class="section" id="configuration-merging">
<h2>Configuration Merging<a class="headerlink" href="#configuration-merging" title="Permalink to this headline">¶</a></h2>
<p>Some build systems may desire to output separate specifications per configuration, and/or to output separate CPS files per component. This is especially useful to permit piecemeal installation of individual components and/or configurations (for example, a &#8220;base&#8221; package with release libraries and common components, an optional package with debug libraries, and another optional package with optional components).</p>
<p>When a tool locates a CPS file, <tt class="code var docutils literal"><span class="pre">name</span></tt><tt class="code path docutils literal"><span class="pre">.cps</span></tt>, the tool shall look in the same directory for any files named <tt class="code var docutils literal"><span class="pre">name</span></tt><tt class="code path docutils literal"><span class="pre">:</span></tt><tt class="code glob docutils literal"><span class="pre">*</span></tt><tt class="code path docutils literal"><span class="pre">.cps</span></tt>,  <tt class="code var docutils literal"><span class="pre">name</span></tt><tt class="code path docutils literal"><span class="pre">&#64;</span></tt><tt class="code glob docutils literal"><span class="pre">*</span></tt><tt class="code path docutils literal"><span class="pre">.cps</span></tt>, and <tt class="code var docutils literal"><span class="pre">name</span></tt><tt class="code path docutils literal"><span class="pre">:</span></tt><tt class="code glob docutils literal"><span class="pre">*</span></tt><tt class="code path docutils literal"><span class="pre">&#64;</span></tt><tt class="code glob docutils literal"><span class="pre">*</span></tt><tt class="code path docutils literal"><span class="pre">.cps</span></tt> (the asterisk (<tt class="docutils literal"><span class="pre">*</span></tt>) represents file globbing). If any such package specifications are found, they shall be loaded at the same time, and their contents appended to the information loaded from the base CPS.</p>
<p>A <tt class="docutils literal"><span class="pre">.cps</span></tt> file whose name contains <tt class="docutils literal"><span class="pre">&#64;</span></tt> is a configuration-specific CPS. The structure of a configuration-specific CPS is the same as a common CPS, with three exceptions:</p>
<ul class="simple">
<li>The per-configuration specification must contain the <a class="reference internal" href="schema.html#configuration"><em>Configuration</em></a> attribute.</li>
<li>The per-configuration specification may not specify any <tt class="code object docutils literal"><span class="pre">component</span></tt> attributes (e.g. <tt class="code attribute docutils literal"><span class="pre">Type</span></tt>).</li>
<li>An attribute on a <tt class="code object docutils literal"><span class="pre">component</span></tt> is considered to belong instead to the component-configuration identified by the configuration-specific CPS.</li>
</ul>
<p>The order in which the data from multiple CPS files is appended is implementation-defined.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Package Configurations</a><ul>
<li><a class="reference internal" href="#configuration-merging">Configuration Merging</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="components.html"
                        title="previous chapter">Component Specification</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="searching.html"
                        title="next chapter">Package Searching</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/configurations.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="searching.html" title="Package Searching"
             >next</a> |</li>
        <li class="right" >
          <a href="components.html" title="Component Specification"
             >previous</a> |</li>
        <li><a href="index.html">Common Package Specification 0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2017, Matthew Woehlke.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>Common Package Specification</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7614 2013-02-21 15:55:51Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="common-package-specification">
<h1 class="title">Common Package Specification</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Version:</th>
<td>0.3</td></tr>
</tbody>
</table>
<p>This document describes the schema for Common Package Specification files. A Common Package Specification file (hereafter &quot;CPS&quot;) is a mechanism for describing how users may consume a package. &quot;User&quot; here refers to another package, not an end user. CPS deals with building software.</p>
<p>CPS is based on <a class="reference external" href="http://www.json.org/">JSON</a>. A CPS file is a valid JSON object.</p>
<style>
  html {
    color: black;
    background: white;
    font-family: sans;
  }
  table.docinfo { margin: 2em 0; }
  p, li { text-align: justify; }
  .section .section { padding: 0 2em; }
  .title {
    padding: 0.1em;
    box-shadow: 0 0.3em 0.2em #ddd;
    border: 1px solid #eee;
    border-radius: 0.3em;
    background: #f8f8f8;
  }
  h3 {
    padding: 0.2em;
    border: 0 solid #aaa;
    border-width: 0.1em 0;
    background: #eee;
  }
  .hidden { display: none; }
  code.type { color: #172; font-weight: bold; }
  code.keyword { color: #621; font-weight: bold; }
  code.string { color: #d32; }
  code.attribute { color: #15a; }
  code.object { color: #294; }
  code.object:before { content: "<"; }
  code.object:after { content: ">"; }
  .applies-to { font-size: 80%; color: #777; }
  .path { color: #641; }
  .glob { color: #b92; }
  .var { color: #852; font-style: italic; }
  .var:before { content: "<"; }
  .var:after { content: ">"; }
  .env { color: #591; }

</style><div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#history" id="id1">History</a></li>
<li><a class="reference internal" href="#overview" id="id2">Overview</a></li>
<li><a class="reference internal" href="#package-schema" id="id3">Package Schema</a><ul>
<li><a class="reference internal" href="#objects" id="id4">Objects</a><ul>
<li><a class="reference internal" href="#package-object" id="id5"><code class="object">Package</code><span class="hidden">(Object)</span></a></li>
<li><a class="reference internal" href="#requirement-object" id="id6"><code class="object">Requirement</code><span class="hidden">(Object)</span></a></li>
<li><a class="reference internal" href="#component-object" id="id7"><code class="object">Component</code><span class="hidden">(Object)</span></a></li>
<li><a class="reference internal" href="#configuration-object" id="id8"><code class="object">Configuration</code><span class="hidden">(Object)</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#attributes" id="id9">Attributes</a><ul>
<li><a class="reference internal" href="#compat-configurations" id="id10"><code class="attribute">Compat-Configurations</code></a></li>
<li><a class="reference internal" href="#compat-version" id="id11"><code class="attribute">Compat-Version</code></a></li>
<li><a class="reference internal" href="#compile-flags" id="id12"><code class="attribute">Compile-Flags</code></a></li>
<li><a class="reference internal" href="#components" id="id13"><code class="attribute">Components</code></a></li>
<li><a class="reference internal" href="#configuration" id="id14"><code class="attribute">Configuration</code></a></li>
<li><a class="reference internal" href="#configurations-package" id="id15"><code class="attribute">Configurations</code> <span class="applies-to">(Package)</span></a></li>
<li><a class="reference internal" href="#configurations-component" id="id16"><code class="attribute">Configurations</code> <span class="applies-to">(Component)</span></a></li>
<li><a class="reference internal" href="#cps-path" id="id17"><code class="attribute">Cps-Path</code></a></li>
<li><a class="reference internal" href="#cps-version" id="id18"><code class="attribute">Cps-Version</code></a></li>
<li><a class="reference internal" href="#default-components" id="id19"><code class="attribute">Default-Components</code></a></li>
<li><a class="reference internal" href="#definitions" id="id20"><code class="attribute">Definitions</code></a></li>
<li><a class="reference internal" href="#hints" id="id21"><code class="attribute">Hints</code></a></li>
<li><a class="reference internal" href="#includes" id="id22"><code class="attribute">Includes</code></a></li>
<li><a class="reference internal" href="#link-flags" id="id23"><code class="attribute">Link-Flags</code></a></li>
<li><a class="reference internal" href="#link-libraries" id="id24"><code class="attribute">Link-Libraries</code></a></li>
<li><a class="reference internal" href="#location" id="id25"><code class="attribute">Location</code></a></li>
<li><a class="reference internal" href="#name" id="id26"><code class="attribute">Name</code></a></li>
<li><a class="reference internal" href="#requires-component" id="id27"><code class="attribute">Requires</code> <span class="applies-to">(Component)</span></a></li>
<li><a class="reference internal" href="#requires-package" id="id28"><code class="attribute">Requires</code> <span class="applies-to">(Package)</span></a></li>
<li><a class="reference internal" href="#type" id="id29"><code class="attribute">Type</code></a></li>
<li><a class="reference internal" href="#version-package" id="id30"><code class="attribute">Version</code> <span class="applies-to">(Package)</span></a></li>
<li><a class="reference internal" href="#version-requirement" id="id31"><code class="attribute">Version</code> <span class="applies-to">(Requirement)</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#notes" id="id32">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#component-specification" id="id33">Component Specification</a></li>
<li><a class="reference internal" href="#package-configurations" id="id34">Package Configurations</a><ul>
<li><a class="reference internal" href="#configuration-merging" id="id35">Configuration Merging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-searching" id="id36">Package Searching</a><ul>
<li><a class="reference internal" href="#prefix-determination" id="id37">Prefix Determination</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="history">
<h1><a class="toc-backref" href="#id1">History</a></h1>
<p>In the beginning, there was anarchy. Building a project which consumed a different, external project typically involved hand coding build directives based on assumptions where the external would be located.</p>
<p>Along came pkg-config. This was an improvement, but it was designed for UNIX-like platforms and isn't entirely portable. Also, while pkg-config does an adequate job describing the necessary compile and link flags to consume a package, this information is not always sufficient.</p>
<p>Some time later, CMake entered the scene, eventually gaining its own mechanism to describe a package. While this system solved many earlier problems, it relies on the CMake language and is therefore tightly coupled to that build system.</p>
<p>CPS attempts to solve these issues by taking the lessons learned by CMake and providing compatible information in a format that is not tied to the language of a particular build system.</p>
</div>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id2">Overview</a></h1>
<p>A CPS file provides a description of a package that is intended to be consumed by other packages that build against that package. By providing a detailed, flexible, and language-agnostic description, CPS aims to make it easy to portably consume packages, regardless of build systems used.</p>
<p>Like pkg-config files and CMake package configuration files, CPS files are intended to be produced by the package provider, and included in the package's distribution. Additionally, the CPS file is not intended to cover all possible configurations of a package; rather, it is meant to be generated by the build system and to describe the artifacts for a single architecture.</p>
<p>One important note, however, is that while CPS includes support for executable targets (typically used for making available code generation tools), CPS does <em>not</em> try to provide a portable mechanism for specifying how such a tool should be invoked. This is not a problem that lends itself to simple, generic solutions. It is left to the consumer to know how to do this, and/or to the package to provide additional, tool-specific utilities for this purpose.</p>
</div>
<div class="section" id="package-schema">
<h1><a class="toc-backref" href="#id3">Package Schema</a></h1>
<div class="section" id="objects">
<h2><a class="toc-backref" href="#id4">Objects</a></h2>
<div class="section" id="package-object">
<h3><a class="toc-backref" href="#id5"><code class="object">Package</code><span class="hidden">(Object)</span></a></h3>
<p>The root of a CPS document is a <code class="object">package</code> object. A <code class="object">package</code> object describes a single package.</p>
</div>
<div class="section" id="requirement-object">
<h3><a class="toc-backref" href="#id6"><code class="object">Requirement</code><span class="hidden">(Object)</span></a></h3>
<p>A <code class="object">requirement</code> describes the specifics of a package dependency.</p>
</div>
<div class="section" id="component-object">
<h3><a class="toc-backref" href="#id7"><code class="object">Component</code><span class="hidden">(Object)</span></a></h3>
<p>A <code class="object">component</code> is a consumable part of a package. Typical components include libraries and executables.</p>
</div>
<div class="section" id="configuration-object">
<h3><a class="toc-backref" href="#id8"><code class="object">Configuration</code><span class="hidden">(Object)</span></a></h3>
<p>A <code class="object">configuration</code> holds attributes that are specific to a particular configuration of a <code class="object">component</code>.</p>
</div>
</div>
<div class="section" id="attributes">
<h2><a class="toc-backref" href="#id9">Attributes</a></h2>
<p>An optional attribute may have the value <code class="keyword">null</code>. This shall be equivalent to omitting the attribute.</p>
<div class="section" id="compat-configurations">
<h3><a class="toc-backref" href="#id10"><code class="attribute">Compat-Configurations</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">bool</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code>, <code class="object">component</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies that the various configurations of a component are compatible with each other, and that intermediate consumers should allow downstream consumers to select the configuration of the component to use. (Specifically, recommends that a consumer's <code class="attribute">Requires</code> should not require a particular configuration of this component.) This allows, for example, that an application using library A which uses library B, when built in debug mode, shall use the debug configuration of B, even if a debug configuration of A is not available (and A was not built against the debug version of B).</p>
<p>When specified on a <code class="object">package</code>, overrides the default value for all components that do not specify the attribute. Otherwise, the default is <code class="keyword">false</code>.</p>
</div>
<div class="section" id="compat-version">
<h3><a class="toc-backref" href="#id11"><code class="attribute">Compat-Version</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies the oldest version of the package with which this version is compatible. This information is used when a consumer requests a specific version. If the version requested is equal to or newer than the <code class="attribute">Compat-Version</code>, the package may be used.</p>
<p>If not specified, the package is not compatible with previous versions (i.e. <code class="attribute">Compat-Version</code> is implicitly equal to <code class="attribute">Version</code>).</p>
</div>
<div class="section" id="compile-flags">
<h3><a class="toc-backref" href="#id12"><code class="attribute">Compile-Flags</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code>, <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a list of additional flags that must be supplied to the compiler when compiling code that consumes the component.</p>
</div>
<div class="section" id="components">
<h3><a class="toc-backref" href="#id13"><code class="attribute">Components</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">map</code> of <code class="type">string</code> to <code class="object">component</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">Yes</td>
</tr>
</tbody>
</table>
<p>Specifies the components which the package provides. Keys are the component names.</p>
</div>
<div class="section" id="configuration">
<h3><a class="toc-backref" href="#id14"><code class="attribute">Configuration</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">Special</td>
</tr>
</tbody>
</table>
<p>Specifies the name of the configuration described by a configuration-specific <tt class="docutils literal">.cps</tt> (see <a class="reference internal" href="#configuration-merging">Configuration Merging</a>). This attribute is required in a configuration-specific <tt class="docutils literal">.cps</tt>, and ignored otherwise.</p>
</div>
<div class="section" id="configurations-package">
<h3><a class="toc-backref" href="#id15"><code class="attribute">Configurations</code> <span class="applies-to">(Package)</span></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies the configurations that are available. See <a class="reference internal" href="#package-configurations">Package Configurations</a> for a description of how configurations are used.</p>
</div>
<div class="section" id="configurations-component">
<h3><a class="toc-backref" href="#id16"><code class="attribute">Configurations</code> <span class="applies-to">(Component)</span></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">map</code> of <code class="type">string</code> to <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a set of configuration-specific attributes for a <code class="object">component</code>. Keys are the configuration names.</p>
</div>
<div class="section" id="cps-path">
<h3><a class="toc-backref" href="#id17"><code class="attribute">Cps-Path</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies the directory portion location of the <tt class="docutils literal">.cps</tt> file. This shall be an &quot;absolute&quot; path which starts with <tt class="docutils literal">&#64;prefix</tt>. This provides an additional mechanism by which the tool may deduce the package's prefix, since the absolute location of the <tt class="docutils literal">.cps</tt> file will be known by the tool. (See also <a class="reference internal" href="#prefix-determination">Prefix Determination</a>.)</p>
</div>
<div class="section" id="cps-version">
<h3><a class="toc-backref" href="#id18"><code class="attribute">Cps-Version</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies the version of the CPS to which this <tt class="docutils literal">.cps</tt> file conforms. This may be used by tools to provide backwards compatibility in case of compatibility-breaking changes in the CPS. If not specified, behavior is implementation defined.</p>
</div>
<div class="section" id="default-components">
<h3><a class="toc-backref" href="#id19"><code class="attribute">Default-Components</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a list of components that should be inferred if a consumer specifies a dependency on a package, but not a specific component.</p>
</div>
<div class="section" id="definitions">
<h3><a class="toc-backref" href="#id20"><code class="attribute">Definitions</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code>, <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a list of compile definitions that must be defined when compiling code that consumes the component.</p>
</div>
<div class="section" id="hints">
<h3><a class="toc-backref" href="#id21"><code class="attribute">Hints</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">requirement</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a list of paths where a required dependency might be located. When given, this will usually provide the location of the dependency as it was consumed by the package when the package was built, so that consumers can easily find (correct) dependencies if they are in a location that is not searched by default.</p>
</div>
<div class="section" id="includes">
<h3><a class="toc-backref" href="#id22"><code class="attribute">Includes</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code>, <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a list of directories which should be added to the include search path when compiling code that consumes the component. If a path starts with <tt class="docutils literal">&#64;prefix&#64;</tt>, the package's install prefix is substituted (see <a class="reference internal" href="#package-searching">Package Searching</a>). This is recommended, as it allows packages to be relocatable.</p>
</div>
<div class="section" id="link-flags">
<h3><a class="toc-backref" href="#id23"><code class="attribute">Link-Flags</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code>, <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a list of additional flags that must be supplied to the linker when linking code that consumes the component.</p>
</div>
<div class="section" id="link-libraries">
<h3><a class="toc-backref" href="#id24"><code class="attribute">Link-Libraries</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code>, <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies a list of additional libraries that must be linked against when linking code that consumes the component. (Note that packages should avoid using this attribute if at all possible. Use <a class="reference internal" href="#requires-component">Requires (Component)</a> instead whenever possible.)</p>
</div>
<div class="section" id="location">
<h3><a class="toc-backref" href="#id25"><code class="attribute">Location</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code>, <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">Depends</td>
</tr>
</tbody>
</table>
<p>Specifies the location of the component. The exact meaning of this attribute depends on the component type, but typically it provides the path to the component's primary artifact, such as a <tt class="docutils literal">.so</tt> or <tt class="docutils literal">.jar</tt>.</p>
<p>If the path starts with <tt class="docutils literal">&#64;prefix&#64;</tt>, the package's install prefix is substituted (see <a class="reference internal" href="#package-searching">Package Searching</a>). This is recommended, as it allows packages to be relocatable.</p>
<p>This attribute is required for <code class="object">component</code>s that are not of <code class="string">&quot;interface&quot;</code> <code class="attribute">Type</code>.</p>
</div>
<div class="section" id="name">
<h3><a class="toc-backref" href="#id26"><code class="attribute">Name</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">Yes</td>
</tr>
</tbody>
</table>
<p>Specifies the canonical name of the package. In order for searching to succeed, this must exactly match the name of the CPS file without the <tt class="docutils literal">.cps</tt> suffix.</p>
</div>
<div class="section" id="requires-component">
<h3><a class="toc-backref" href="#id27"><code class="attribute">Requires</code> <span class="applies-to">(Component)</span></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">list</code> of <code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code>, <code class="object">configuration</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies additional components required by a component. This is used, for example, to indicate transitive dependencies. Relative component names are interpreted relative to the current package. Absolute component names must refer to a package required by this package (see <a class="reference internal" href="#requires-package">Requires (Package)</a>).</p>
</div>
<div class="section" id="requires-package">
<h3><a class="toc-backref" href="#id28"><code class="attribute">Requires</code> <span class="applies-to">(Package)</span></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">map</code> of <code class="type">string</code> to <code class="object">requirement</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies additional packages that are required by this package. Keys are the name of another required package. Values are a valid <code class="object">requirement</code> object or <code class="keyword">null</code> (equivalent to an empty <code class="object">requirement</code> object) describing the package required.</p>
</div>
<div class="section" id="type">
<h3><a class="toc-backref" href="#id29"><code class="attribute">Type</code></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code> (restricted)</td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">component</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">Yes</td>
</tr>
</tbody>
</table>
<p>Specifies the type of a component. The component type affects how the component may be used. Officially supported values are <code class="string">&quot;archive&quot;</code> (C/C++ static library), <code class="string">&quot;dylib&quot;</code> (C/C++ shared library), <code class="string">&quot;module&quot;</code> (C/C++ plugin library), <code class="string">&quot;jar&quot;</code> (Java Archive), and <code class="string">&quot;interface&quot;</code>. If the type is not recognized by the parser, the component shall be ignored. (Parsers are permitted to support additional types as a conforming extension.)</p>
<p>A <code class="string">&quot;dylib&quot;</code> is meant to be linked at compile time; the <code class="attribute">Location</code> specifies the artifact required for such linking (i.e. the import library on PE platforms). A <code class="string">&quot;module&quot;</code> is meant to be loaded at run time with <code>dlopen</code> or similar; again, the <code class="attribute">Location</code> specifies the appropriate artifact.</p>
<p>An <code class="string">&quot;interface&quot;</code> component is a special case; it may have the usual attributes of a component, but does not have a location. This can be used to create &quot;virtual&quot; components that do not have an associated artifact.</p>
</div>
<div class="section" id="version-package">
<h3><a class="toc-backref" href="#id30"><code class="attribute">Version</code> <span class="applies-to">(Package)</span></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">package</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies the version of the package. Although there is no restriction on the format of the version text, successful version matching may impose restrictions.</p>
<p>If not provided, the CPS will not satisfy any request for a specific version of the package.</p>
</div>
<div class="section" id="version-requirement">
<h3><a class="toc-backref" href="#id31"><code class="attribute">Version</code> <span class="applies-to">(Requirement)</span></a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Type:</th><td class="field-body"><code class="type">string</code></td>
</tr>
<tr class="field"><th class="field-name">Applies To:</th><td class="field-body"><code class="object">requirement</code></td>
</tr>
<tr class="field"><th class="field-name">Required:</th><td class="field-body">No</td>
</tr>
</tbody>
</table>
<p>Specifies the required version of a package. If omitted, any version of the required package is acceptable. Semantics are the same as for the <code class="attribute">Version</code> attribute of a <code class="object">package</code>.</p>
</div>
</div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id32">Notes</a></h2>
<ul class="simple">
<li>Unless otherwise specified, a relative file path appearing in a CPS shall be interpreted relative to the <tt class="docutils literal">.cps</tt> file.</li>
<li>Unless otherwise specified, unrecognized attributes shall be ignored. This makes it easier for tools to add tool-specific extensions. (It is <em>strongly</em> recommended that the tool name is included in the names of any such attributes in order to reduce the chance of conflicts with newer versions of the CPS.)</li>
</ul>
</div>
</div>
<div class="section" id="component-specification">
<h1><a class="toc-backref" href="#id33">Component Specification</a></h1>
<p>Package, component and configuration names may consist of ASCII letters, numbers, hyphens (<tt class="docutils literal">-</tt>), and underscores (<tt class="docutils literal">_</tt>), and may not contain forward-stroke (<tt class="docutils literal">/</tt>) or at-sign (<tt class="docutils literal">&#64;</tt>). Colon (<tt class="docutils literal">:</tt>) may be used in component and configuration names, but not package names. The behavior of other characters is implementation defined. Portable packages are recommended to use only those characters which are expressly permitted.</p>
<p>A CPS component specification consists of either a package name, component name, or package-component name, either of which may optionally specify a configuration. A colon (<tt class="docutils literal">:</tt>) is used to separate a package name from a component name, and always precedes a component name without a package name. A component specification including a package name is an &quot;absolute&quot; name. A component specification without a package name is a &quot;relative&quot; name; the package name in such case is implicitly the same as the package specification in which such name appears. The package and/or component name may be followed by the at-sign (<tt class="docutils literal">&#64;</tt>) and a configuration name. The special case of using the at-sign as a configuration name (e.g. <tt class="docutils literal"><span class="pre">foo:foo-core&#64;&#64;</span></tt>) means that the named configuration is the same as the configuration in which the name appears. (For example, the component <tt class="docutils literal"><span class="pre">foo-ui</span></tt> has non-configuration-specific <code class="attribute">Requires</code> <code class="string">&quot;:foo-core&#64;&#64;&quot;</code> and <code class="attribute">Configurations</code> <code class="string">&quot;A&quot;</code> and <code class="string">&quot;B&quot;</code>. The <code class="string">&quot;A&quot;</code> configuration of <tt class="docutils literal"><span class="pre">foo-ui</span></tt> therefore requires <tt class="docutils literal"><span class="pre">:foo-core&#64;A</span></tt>, and similar for other configurations.)</p>
<p>If a requirement does not specify a configuration, the <em>consumer</em> chooses the most appropriate configuration. This allows the consumer to, for example, link to the debug libraries of an indirect dependency when the consumer is build in debug mode, even if the consumer always uses the optimized configuration of the direct dependency.</p>
</div>
<div class="section" id="package-configurations">
<h1><a class="toc-backref" href="#id34">Package Configurations</a></h1>
<p>Configurations provide a mechanism for a package to provide multiple configurations from a single distribution. Such configurations might include separate debug and release libraries, builds with and without thread safety, and so forth. The possible configurations are determined by each individual package, and it is left to the consumer and build system to decide when and how to select a non-default configuration.</p>
<p>When a consumer consumes a component, the build system must determine the attribute values for that component by selecting which configuration of the component to use (if the component has multiple configurations). It is recommended that build systems select a configuration as follows:</p>
<ul class="simple">
<li>For each package, the consumer shall have a mechanism for providing a list of preferred configurations. The first configuration in this list which matches an available configuration of the component shall be used. (If the build system supports multiple configurations, it is recommended that the consuming project may specify different values and/or order of this list depending on its own active configuration.)</li>
<li>If the build system supports multiple configurations, the build system may implement a mechanism to prefer a configuration which &quot;matches&quot; the consuming project's active configuration.</li>
<li>The package's <a class="reference internal" href="#configurations-package">Configurations (Package)</a> shall be searched. The first configuration in this list which matches an available configuration of the component shall be used.</li>
</ul>
<p>The value of an attribute for a component is determined in one of two ways: If the selected <code class="object">configuration</code> of the <code class="object">component</code> has the attribute, that value is used. Otherwise, if the <code class="object">component</code> directly has the requested attribute, that value is used. This allows a configuration-specific attribute to override an attribute value that is not configuration-specific. If the attribute is required, and is not present on either the selected <code class="object">configuration</code>, or the non-configuration-specific attributes of the <code class="object">component</code>, then the CPS is ill-formed. Note that a value of <code class="keyword">null</code> satisfies the condition of having the attribute. A value of <code class="keyword">null</code> has the usual meaning where <code class="keyword">null</code> is an acceptable value for the attribute; otherwise, a value of <code class="keyword">null</code> shall be treated as the attribute being unset (and shall suppress falling back to the non-configuration-specific value).</p>
<div class="section" id="configuration-merging">
<h2><a class="toc-backref" href="#id35">Configuration Merging</a></h2>
<p>Some build systems may desire to output separate specifications per configuration. This is especially useful to permit piecemeal installation of individual configurations (for example, a &quot;base&quot; package with release libraries and common components, and an optional package with debug libraries).</p>
<p>When a tool locates a CPS file, <code class="var">name</code><code class="path">.cps</code>, the tool shall look in the same directory for any files named <code class="var">name</code><code class="path">&#64;</code><code class="glob">*</code><code class="path">.cps</code> (the asterisk (<tt class="docutils literal">*</tt>) represents file globbing). If any such configuration-specific package specifications are found, they shall be loaded at the same time, and their contents appended to the information loaded from the common CPS. The structure of a configuration-specific CPS is the same as a common CPS, with three exceptions:</p>
<ul class="simple">
<li>The per-configuration specification must contain the <a class="reference internal" href="#configuration">Configuration</a> attribute.</li>
<li>The per-configuration specification may not specify any <code class="object">component</code> attributes (e.g. <code class="attribute">Type</code>).</li>
<li>An attribute on a <code class="object">component</code> is considered to belong instead to the component-configuration identified by the configuration-specific CPS.</li>
</ul>
<p>The order in which per-configuration data is appended is implementation-defined.</p>
</div>
</div>
<div class="section" id="package-searching">
<h1><a class="toc-backref" href="#id36">Package Searching</a></h1>
<p>Tools shall locate a package by searching for a file <code class="var">name</code><code class="path">.cps</code> in the following paths:</p>
<ul class="simple">
<li><code class="var">prefix</code><code class="path">/</code> <span class="applies-to">(Windows)</span></li>
<li><code class="var">prefix</code><code class="path">/cps/</code> <span class="applies-to">(Windows)</span></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">name</code><code class="path">.framework/Resources/CPS/</code> <span class="applies-to">(MacOS)</span></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">name</code><code class="path">.framework/Resources/</code> <span class="applies-to">(MacOS)</span></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">name</code><code class="path">.framework/Versions/</code><code class="glob">*</code><code class="path">/Resources/CPS/</code> <span class="applies-to">(MacOS)</span></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">name</code><code class="path">.framework/Versions/</code><code class="glob">*</code><code class="path">/Resources/</code> <span class="applies-to">(MacOS)</span></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">name</code><code class="path">.app/Contents/Resources/CPS/</code> <span class="applies-to">(MacOS)</span></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">name</code><code class="path">.app/Contents/Resources/</code> <span class="applies-to">(MacOS)</span></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">libdir</code><code class="path">/</code><code class="var">name</code><code class="path">/cps/</code></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">libdir</code><code class="path">/cps/</code><code class="var">name</code><code class="path">/</code></li>
<li><code class="var">prefix</code><code class="path">/</code><code class="var">libdir</code><code class="path">/cps/</code></li>
<li><code class="var">prefix</code><code class="path">/share/</code><code class="var">name</code><code class="path">/cps/</code></li>
<li><code class="var">prefix</code><code class="path">/share/cps/</code><code class="var">name</code><code class="path">/</code></li>
<li><code class="var">prefix</code><code class="path">/share/cps/</code></li>
</ul>
<p>The placeholder <code class="var">name</code> shall represent the name of the package to be located, and shall include both the proper case name, and the name converted to lower case. The placeholder <code class="var">libdir</code> shall be the platform defined directories, sans root prefix, in which matching architecture and/or architecture-neutral libraries reside (e.g. <code class="path">lib</code>, <code class="path">lib32</code>, <code class="path">lib64</code>, <code class="path">lib/i386-linux-gnu</code>...). The placeholder <code class="var">prefix</code> shall represent one of the set of default install prefixes to be searched, which shall include, at minimum and in order, the set of paths (separated by <code class="path">;</code> on Windows, <code class="path">:</code> otherwise) in the environment variable <code class="env">CPS_PATH</code>, <code class="path">/usr/local</code>, and <code class="path">/usr</code>. In addition, for all such package-neutral prefixes <code class="var">prefix-root</code>, the package-specific prefix <code class="var">prefix-root</code><code class="path">/</code><code class="var">name</code> shall also be considered. The complete list of search paths, above, shall be considered in the order specified above, for each prefix, before the next prefix is searched. Package-specific prefixes shall be searched before package-neutral prefixes.</p>
<p>It is recommended that tools should also provide a mechanism for specifying the path to a specific CPS which may be used to override the default search, or to provide the location of a package which is not installed to any of the standard search paths.</p>
<div class="section" id="prefix-determination">
<h2><a class="toc-backref" href="#id37">Prefix Determination</a></h2>
<p>In order to determine the package prefix, which may appear in various attributes as <tt class="docutils literal">&#64;prefix&#64;</tt>, it is necessary to determine the effective prefix from the canonical location of the <tt class="docutils literal">.cps</tt> file. This can be accomplished in three ways:</p>
<ul class="simple">
<li>If the package specifies a <code class="attribute">Cps-Path</code>, that value shall be used.</li>
<li>Otherwise, if the tool has just completed a search for the <tt class="docutils literal">.cps</tt>, as described above, the prefix is known from the path which was searched.</li>
<li>Otherwise, the prefix shall be deduced as follows:<ul>
<li>The path is initially taken to be the directory portion (i.e. without file name) of the absolute path to the <tt class="docutils literal">.cps</tt> file.</li>
<li><span class="applies-to">(MacOS)</span> If the tail-portion matches <code class="path">/Resources/</code> or <code class="path">/Resources/CPS/</code>, then:<ul>
<li>The matching portion is removed.</li>
<li>If the tail-portion of the remaining path matches <code class="path">/Versions/</code><code class="glob">*</code><code class="path">/</code>, that portion is removed.</li>
<li>If the tail-portion of the remaining path matches <code class="path">/</code><code class="var">name</code><code class="path">.framework/</code> or <code class="path">/</code><code class="var">name</code><code class="path">.app/Contents/</code>, that portion is removed.</li>
</ul>
</li>
<li>Otherwise:<ul>
<li>If the tail-portion of the path matches any of <code class="path">/cps/</code>, <code class="path">/</code><code class="var">name</code><code class="path">/cps/</code> or <code class="path">/cps/</code><code class="var">name</code><code class="path">/</code>, the longest such matching portion is removed.</li>
<li>If the tail-portion of the remaining path matches any of <code class="path">/</code><code class="var">libdir</code><code class="path">/</code> or <code class="path">/share/</code>, that portion is removed.</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- kate: hl reStructuredText -->
</div>
</div>
</div>
</body>
</html>

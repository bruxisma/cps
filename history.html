
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>History &#8212; Common Package Specification v0.8.2</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/cps.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    
    <link rel="shortcut icon" href="_static/cps-favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development Process" href="development.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="development.html" title="Development Process"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Common Package Specification v0.8.2</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">History</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="history">
<h1>History<a class="headerlink" href="#history" title="Permalink to this heading">¶</a></h1>
<p>In the beginning, there was anarchy.
Building a project which consumed a different, external project
typically involved hand coding build directives
based on assumptions where the external would be located.</p>
<p>Along came <a class="reference external" href="https://www.freedesktop.org/wiki/Software/pkg-config/">pkg-config</a>.
This was an improvement,
but it was designed for UNIX-like platforms
and isn’t entirely portable.
Also, while pkg-config does an adequate job
describing the necessary compile and link flags to consume a package,
this information is not always sufficient.</p>
<p>Some time later, <a class="reference external" href="https://cmake.org/">CMake</a> entered the scene,
eventually gaining its own mechanism to describe a package.
While this system solved many earlier problems,
it relies on the CMake language
and is therefore tightly coupled to that build system.</p>
<p>CPS attempts to solve these issues
by taking the lessons learned by CMake
and providing compatible information in a format
that is not tied to the language of a particular build system.</p>
<section id="what-s-wrong-with-pkg-config">
<h2>What’s wrong with pkg-config?<a class="headerlink" href="#what-s-wrong-with-pkg-config" title="Permalink to this heading">¶</a></h2>
<p>pkg-config was created
way back in the bad old days of autotools,
when everyone was using the same compiler and linker.
It handles everything by direct specification of compile flags,
which breaks down when multiple compilers
with incompatible front-ends come into play
and/or in the face of “superseded” features.
(For instance, given a project consuming packages “A” and “B”,
requiring C++14 and C++11, respectively,
pkg-config requires the build tool
to translate compile flags back into features
in order to know that the consumer
should not be build with <code class="docutils literal notranslate"><span class="pre">-std=c++14</span> <span class="pre">...</span> <span class="pre">-std=c++11</span></code>.)</p>
<p>Specification of link libraries
via a combination of <code class="docutils literal notranslate"><span class="pre">-L</span></code> and <code class="docutils literal notranslate"><span class="pre">-l</span></code> flags is a problem,
as it fails to ensure that consumers find the intended libraries.
Not providing a full path to the library
also places more work on the build tool
(which must attempt to deduce full paths from the link flags)
to compute appropriate dependencies
in order to re-link targets when their link libraries have changed.</p>
<p>Last, pkg-config is not an ideal solution
for large projects consisting of multiple components,
as each component needs its own <code class="docutils literal notranslate"><span class="pre">.pc</span></code> file.</p>
</section>
<section id="what-s-wrong-with-cmake-exported-targets">
<h2>What’s wrong with CMake exported targets?<a class="headerlink" href="#what-s-wrong-with-cmake-exported-targets" title="Permalink to this heading">¶</a></h2>
<p>CMake exported targets provide a richly featured mechanism
for describing packages as a set of individual components,
along with the necessary details for consuming each individual component.
This generally works well… <em>for CMake</em>.
The biggest problem with this system
is not any internal flaw in the system,
but the fact that it relies on the CMake language.
Consumers have to parse not only CMake syntax,
but in some cases need to cope with CMake generator expressions.
Moreover, packages have access to the entire CMake language,
which is Turing complete and capable of executing external processes.
It would be exceptionally difficult for non-CMake tools
to consume CMake package specifications
without effectively reimplementing most or all of CMake itself.
Clearly, this is not practical.</p>
<p>Even so, certain tasks that should be easy,
such as handling transitive dependencies
or specifying version compatibility,
are difficult and may require hand-writing code.
While there is plenty of room for improvement
without leaving the CMake ecosystem,
CPS offers similar room for growth
while also opening up package distribution
to a wider audience of consumers.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-s-wrong-with-pkg-config">What’s wrong with pkg-config?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-wrong-with-cmake-exported-targets">What’s wrong with CMake exported targets?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development Process</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schema.html">Package Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Compiler and Linker Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Component Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurations.html">Package Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="searching.html">Package Searching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schema-supplement.html">Supplemental Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="recommendations.html">Usage and Implementation Recommendations</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">Sample CPS File</a></li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="overview.html"
                          title="previous chapter">Overview</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="development.html"
                          title="next chapter">Development Process</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/history.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="development.html" title="Development Process"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Common Package Specification v0.8.2</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">History</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Matthew Woehlke.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>